<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NFC Student ID Reader</title>
</head>
<body>
    <button id="scan">Scan NFC Tag</button>
    <p id="studentId">Student ID will appear here.</p>

    <script>
        document.getElementById('scan').addEventListener('click', async () => {
            if ('NDEFReader' in window) {
                try {
                    const reader = new NDEFReader();
                    await reader.scan();

                    reader.onreading = event => {
                        for (const record of event.message.records) {
                            console.log("Record type: " + record.recordType);
                            console.log("MIME type: " + record.mediaType);
                            console.log("Record id: " + record.id);

                            let text;
                            if (record.recordType === "text") {
                                // Directly decode text records
                                const decoder = new TextDecoder();
                                text = decoder.decode(record.data);
                            } else {
                                // For other types, handle appropriately or provide feedback
                                text = "Unsupported record type or needs specific handling.";
                            }

                            // Update the UI with the text/content from the NFC tag
                            document.getElementById('studentId').textContent = `Data: ${text}`;
                        }
                    };
                    console.log("NFC reader is scanning...");
                } catch (error) {
                    console.error(`Error: ${error}.`);
                }
            } else {
                console.log("Web NFC is not supported.");
                alert("Web NFC is not supported on this browser/device.");
            }
        });
    </script>
</body>
</html>
